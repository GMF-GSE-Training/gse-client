<app-display-files
  pageTitle="View Certificate"
  [navigationLinks]="getNavigationLink()"
  [isLoading]="isLoading"
  [showDeleteButton]="canDeleteCertificate()"
  (downloadChange)="downloadPdf()"
  (deleteChange)="deleteCertificate()">
  
  @if(isLoading) {
    <app-loader></app-loader>
  } @else {
    @if(pdfUrl && !isLoadingPdf && !pdfError) {
      <iframe 
        [src]="pdfUrl" 
        width="100%" 
        height="600px"
        title="Certificate PDF Preview"
        loading="lazy"
        class="certificate-iframe">
        <p>Browser Anda tidak mendukung preview PDF. 
          <a (click)="downloadPdf()" style="cursor: pointer; color: #007bff;">Unduh PDF</a> sebagai gantinya.
        </p>
      </iframe>
    } @else if(isLoadingPdf) {
      <div class="pdf-loading">
        <div class="text-center py-4">
          <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading PDF...</span>
          </div>
          <p class="mt-2">Memuat preview PDF...</p>
        </div>
      </div>
    } @else if(pdfError) {
      <div class="pdf-error">
        <div class="text-center py-4">
          <i class="fas fa-exclamation-triangle text-warning fa-2x mb-3"></i>
          <h5>Tidak dapat memuat preview PDF</h5>
          <p class="text-muted mb-3">Preview PDF tidak dapat dimuat, tetapi Anda masih bisa mengunduh sertifikat.</p>
          <button class="btn btn-primary" (click)="loadPdfPreview()">
            <i class="fas fa-redo me-1"></i>
            Coba Lagi
          </button>
        </div>
      </div>
    } @else if(!certificate) {
      <div class="no-files">
        <p>Sertifikat tidak ditemukan!!</p>
      </div>
    }
  }
</app-display-files>
